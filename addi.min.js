var addi={_saveData:[],_dragClass:"draggable",_draggingClass:"isdragging",_dragOpacity:.8,_addi_zIndex:100,oFence:{bFullscreen:!0,top:0,left:0,width:window.innerWidth,height:window.innerHeight},_savstyles:{transition:"auto"},init(e){e&&(this._dragClass=e);var t=document.getElementsByClassName(this._dragClass);if(t&&t.length)for(var i=0;i<t.length;i++)this.initDiv(t[i],!1)},_fixVisiblePosition(e,t,i){this._updateFence(e.style.paddingLeft);var s=window.getComputedStyle(e),a=0+parseInt(s.borderLeftWidth)+parseInt(s.borderRightWidth)+parseInt(s.marginLeft)+parseInt(s.marginRight)+parseInt(s.paddingLeft)+parseInt(s.paddingRight)-(window.innerWidth-document.documentElement.clientWidth),n=0+parseInt(s.borderTopWidth)+parseInt(s.borderBottomWidth)+parseInt(s.marginTop)+parseInt(s.marginBottom);return t=Math.max(this.oFence.left,t),t=Math.min(this.oFence.left+this.oFence.width-e.clientWidth-a,t),i=Math.max(this.oFence.top,i),"fixed"===s.position&&(i=Math.min(this.oFence.top+this.oFence.height-e.clientHeight-n,i)),{xpos:t,ypos:i}},_getVarname:e=>"addi.saveddiv-"+e,_save(e){aData={left:e.style.left.replace("px",""),top:e.style.top.replace("px","")},localStorage.setItem(this._getVarname(e.id),JSON.stringify(aData))},_styleSave(e){var t=window.getComputedStyle(e);for(var i in void 0===this._saveData[e.id]&&(this._saveData[e.id]=new Object),this._savstyles)this._saveData[e.id][i]=t.getPropertyValue(i),e.style[i]=this._savstyles[i];return!0},_styleRestore(e){for(var t in this._savstyles)e.style[t]=this._saveData[e.id][t];return!0},_updateFence(){this.oFence.bFullscreen&&(this.oFence={bFullscreen:!0,top:0,left:0,width:window.innerWidth,height:window.innerHeight})},_generateId(){for(var e="generatedId-",t=1;document.getElementById(e+t);)t++;return e+t},initDiv(e,t){var i=e.id;i||(i=this._generateId(),e.id=i);var s=e.currentStyle||window.getComputedStyle(e);!s.position||s.position,o=t||e,o.onmousedown=function(e){addi._isDragging=!0,addi.startMoving(document.getElementById(i),e)},o.onmouseup=function(){addi._isDragging=!1,addi.stopMoving(document.getElementById(i))},!1!==e.className.indexOf("saveposition")&&this.load(e)},load(e){var t=this._getVarname(e.id),i=e.currentStyle||window.getComputedStyle(e);i.zIndex&&i.zIndex>0&&(this._addi_zIndex=Math.max(parseInt(i.zIndex),this._addi_zIndex)),e.style.zIndex=this._addi_zIndex++;var s=!!localStorage.getItem(t)&&JSON.parse(localStorage.getItem(t));return s&&s.left&&s.top&&this.move(e,s.left,s.top,!0),s},move(e,t,i,s){e.style.bottom="auto";var a=s?{xpos:t,ypos:i}:this._fixVisiblePosition(e,t,i);return e.style.left=a.xpos+"px",e.style.top=a.ypos+"px",this._save(e),!0},startMoving(e,t){if(!1===e.className.indexOf(this._dragClass))return!1;var i=(t=t||window.event).clientX,s=t.clientY;this._styleSave(e),e.className.indexOf(this._draggingClass)<0&&(e.className+=" "+this._draggingClass),document.body.style.userSelect="none",iDivWidth=parseInt(e.style.width),iDivHeight=parseInt(e.style.height),e.style.cursor="move",e.style.zIndex=this._addi_zIndex++,iDivLeft=e.style.left?e.style.left.replace("px",""):e.offsetLeft,iDivTop=e.style.top?e.style.top.replace("px",""):e.offsetTop;var a=i-iDivLeft,n=s-iDivTop;return document.onmousemove=function(t){var i=(t=t||window.event).clientX,s=t.clientY,o=i-a,d=s-n;addi.move(e,o,d)},!0},stopMoving(e){e.style.cursor="default",this._styleRestore(e),document.body.style.userSelect="auto",e.className=e.className.replace(this._draggingClass,""),document.onmousemove=function(){}},resetPos(){var e=document.getElementsByClassName(this._dragClass);if(e&&e.length)for(var t=0;t<e.length;t++)e[t].style="",this._save(e[t])},reset(e){var t=document.getElementsByClassName(this._dragClass);if(t&&t.length)for(var i=0;i<t.length;i++)this._resetDiv(t[i],e)},_resetDiv(e,t){e.onmousemove=null,e.onmouseup=null,e.onmousedown=null,e.style="",t&&localStorage.removeItem(this._getVarname(e.id))}};